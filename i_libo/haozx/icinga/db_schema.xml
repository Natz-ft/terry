<?xml version="1.0" encoding="utf-8"?>

<!--
* vim: set expandtab tabstop=4 shiftwidth=4 softtabstop=4 foldmethod=marker: */
*
* DATABASE schame
-->

<!-- {{{ databases -->

<databases>
    <!-- {{{ database eyou_toolmail -->
    <database name="eyou_toolmail">
        <charset>utf8</charset>
        <!-- {{{ tables -->
        <tables>

            <!-- {{{ table host_key -->

            <table name="host_key">
                <desc>主机关键信息表</desc>
                <engine>InnoDB</engine>
                <charset>utf8</charset>
                <columns>
                    <column name="host_id">
                        <desc>主机id</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default>0</default>
                    </column>

                    <column name="host_name">
                        <desc>主机名</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>255</precision>
                        <charset>latin1</charset>
                        <default></default>
                    </column>
                </columns>

                <keys>
                    <key name="">
                        <desc></desc>
                        <type>primary</type>
                        <fields>
                            <field name="host_id"></field>
                        </fields>
                    </key>

                    <key name="ik_0">
                        <desc></desc>
                        <type>index</type>
                        <fields>
                            <field name="host_id"></field>
                        </fields>
                    </key>
                </keys>
            </table>

            <!-- }}} -->
            <!-- {{{ table host_basic -->

            <table name="host_basic">
                <desc>主机基本信息表</desc>
                <engine>InnoDB</engine>
                <charset>utf8</charset>
                <columns>
                    <column name="host_id">
                        <desc>关联 host_key.host_id</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default></default>
                    </column>

                    <column name="description">
                        <desc>主机的描述信息</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>1024</precision>
                        <default></default>
                    </column>

                    <column name="alias">
                        <desc>主机别名</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>255</precision>
                        <default></default>
                    </column>

                    <column name="display_name">
                        <desc>主机显示名</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>255</precision>
                        <default></default>
                    </column>

                    <column name="address">
                        <desc>主机地址</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>255</precision>
                        <default></default>
                    </column>

                    <column name="group_id">
                        <desc>主机所属组. 关联 host_group.group_id</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default></default>
                    </column>

                    <column name="parent_id">
                        <desc>该主机的父节点</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default></default>
                    </column>
                </columns>

                <keys>
                    <key name="">
                        <desc></desc>
                        <type>primary</type>
                        <fields>
                            <field name="host_id"></field>
                        </fields>
                    </key>
                </keys>
            </table>

            <!-- }}} -->
            <!-- {{{ table host_monitor -->

            <table name="host_monitor">
                <desc>主机告警信息表</desc>
                <engine>InnoDB</engine>
                <charset>utf8</charset>
                <columns>
                    <column name="host_id">
                        <desc>关联 host_key.host_id</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default></default>
                    </column>

                    <column name="initial_state">
                        <desc>主机的初始化状态 0:UP 1:DOWN 2:UNREACHABLE</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>4</precision>
                        <default>0</default>
                    </column>

                    <column name="max_check_attempt">
                        <desc>主机处于非正常状态时重试的次数</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>4</precision>
                        <default>0</default>
                    </column>

                    <column name="check_interval">
                        <desc>主机检查的时间间隔 单位 秒</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default>60</default>
                    </column>

                    <column name="retry_interval">
                        <desc>主机重试的时间间隔 单位 秒</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default>60</default>
                    </column>

                    <column name="cache_interval">
                        <desc>主机缓存可信任时间 单位 秒</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default>15</default>
                    </column>

                    <column name="check_type">
                        <desc>主机检测的方式 0:主动检测 1:被动检测</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>4</precision>
                        <default>0</default>
                    </column>

                    <column name="check_period_id">
                        <desc>主机检测的时间段 关联time_period.period_id</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default></default>
                    </column>

                    <column name="check_freshness">
                        <desc>主机是否开启刷新检测，只有被动检测有效 0:不开启 1:开启</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>4</precision>
                        <default>0</default>
                    </column>

                    <column name="freshness_threshold">
                        <desc>主机刷新检测的阀值 单位 秒</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default></default>
                    </column>

                    <column name="event_handler_enable">
                        <desc>主机是否开启事件处理 0:不开启 1:开启</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>4</precision>
                        <default>0</default>
                    </column>

                    <column name="flap_enable">
                        <desc>主机是否开启抖动感知 0:不开启 1:开启</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>4</precision>
                        <default>0</default>
                    </column>

                    <column name="flap_options">
                        <desc>主机抖动感知级别 1:UP 2:DOWN 4:UNREACHABLE</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>4</precision>
                        <default>7</default>
                    </column>

                    <column name="low_flap_threshold">
                        <desc>主机抖动感知低阀值</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default>25</default>
                    </column>

                    <column name="high_flap_threshold">
                        <desc>主机抖动感知高阀值</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default>50</default>
                    </column>

                    <column name="contact_id">
                        <desc>主机通知的联系人 多个用逗号分隔</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>255</precision>
                        <default></default>
                    </column>

                    <column name="contact_group_id">
                        <desc>主机通知的联系人组 多个用逗号分隔</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>255</precision>
                        <default></default>
                    </column>

                    <column name="notice_enable">
                        <desc>主机通知是否开启 0:不开启 1:开启</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>4</precision>
                        <default>0</default>
                    </column>

                    <column name="notice_interval">
                        <desc>主机通知的时间间隔 单位 秒</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default>60</default>
                    </column>

                    <column name="notice_period_id">
                        <desc>主机通知的时间段 关联 time_period.period_id</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default></default>
                    </column>

                    <column name="notice_options">
                        <desc>主机通知的等级 1:DOWN 2:UNREACHABLE 4:RECOVER 8:FLAPING 16:DOWNTIME</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>4</precision>
                        <default>60</default>
                    </column>
                </columns>

                <keys>
                    <key name="">
                        <desc></desc>
                        <type>primary</type>
                        <fields>
                            <field name="host_id"></field>
                        </fields>
                    </key>
                </keys>
            </table>

            <!-- }}} -->
            <!-- {{{ table host_status -->

            <table name="host_status">
                <desc>主机状态信息表</desc>
                <engine>InnoDB</engine>
                <charset>utf8</charset>
                <columns>
                    <column name="host_id">
                        <desc>关联 host_key.host_id</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default>0</default>
                    </column>

                    <column name="status_update">
                        <desc>主机状态更新时间</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default></default>
                    </column>

                    <column name="output">
                        <desc>主机检测的返回信息摘要</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>1024</precision>
                        <default></default>
                    </column>

                    <column name="long_output">
                        <desc>主机检测的返回信息</desc>
                        <type>text</type>
                        <nullable>false</nullable>
                        <precision></precision>
                        <default></default>
                    </column>

                    <column name="current_state">
                        <desc>主机的当前状态 0:UP 1:DOWN 2:UNREACHABLE</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>4</precision>
                        <default>0</default>
                    </column>

                    <column name="current_check_attempt">
                        <desc>主机的当前检测重试次数</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>4</precision>
                        <default>0</default>
                    </column>

                    <column name="last_check">
                        <desc>主机的最后检测的时间</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default>0</default>
                    </column>

                    <column name="last_state_change">
                        <desc>主机的最后状态变化的时间</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default>0</default>
                    </column>

                    <column name="last_hard_state_change">
                        <desc>主机的最后硬状态变化的时间</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default>0</default>
                    </column>

                    <column name="last_time_up">
                        <desc>主机的最后 UP 的时间</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default>0</default>
                    </column>

                    <column name="last_time_down">
                        <desc>主机的最后 DOWN 的时间</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default>0</default>
                    </column>

                    <column name="last_time_unreachable">
                        <desc>主机的最后 UNREACHABLE 的时间</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default>0</default>
                    </column>

                    <column name="state_type">
                        <desc>主机最终状态类型 0:SOFT 1:HARD</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>4</precision>
                        <default>0</default>
                    </column>

                    <column name="last_notification">
                        <desc>主机最后通知时间</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default>0</default>
                    </column>

                    <column name="is_flapping">
                        <desc>主机是否处于抖动状态 0:否 1:是</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>4</precision>
                        <default>0</default>
                    </column>

                    <column name="percent_state_change">
                        <desc>主机抖动的变化率</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>4</precision>
                        <default>0</default>
                    </column>

                    <column name="status">
                        <desc>主机历史状态记录，一共保存 21次, 将状态用逗号分隔记录, 用于处理抖动感知</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>255</precision>
                        <default></default>
                    </column>
                </columns>

                <keys>
                    <key name="">
                        <desc></desc>
                        <type>primary</type>
                        <fields>
                            <field name="host_id"></field>
                        </fields>
                    </key>
                </keys>
            </table>

            <!-- }}} -->
            <!-- {{{ table host_group -->

            <table name="host_group">
                <desc>主机属组信息表</desc>
                <engine>InnoDB</engine>
                <charset>utf8</charset>
                <columns>
                    <column name="group_id">
                        <desc>主机组 ID</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default>0</default>
                    </column>

                    <column name="description">
                        <desc>主机组描述</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>1024</precision>
                        <default></default>
                    </column>

                    <column name="alias">
                        <desc>主机组别名</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>255</precision>
                        <default></default>
                    </column>

                    <column name="display_name">
                        <desc>主机组显示名</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>255</precision>
                        <default></default>
                    </column>
                </columns>

                <keys>
                    <key name="">
                        <desc></desc>
                        <type>primary</type>
                        <fields>
                            <field name="group_id"></field>
                        </fields>
                    </key>
                </keys>
            </table>

            <!-- }}} -->
            <!-- {{{ table service_key -->

            <table name="service_key">
                <desc>服务关键信息表</desc>
                <engine>InnoDB</engine>
                <charset>utf8</charset>
                <columns>
                    <column name="service_id">
                        <desc>服务id</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default></default>
                    </column>

                    <column name="host_id">
                        <desc>关联 host_key.host_id</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default></default>
                    </column>

                    <column name="service_name">
                        <desc>服务名</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>255</precision>
                        <charset>latin1</charset>
                        <default></default>
                    </column>
                </columns>

                <keys>
                    <key name="">
                        <desc></desc>
                        <type>primary</type>
                        <fields>
                            <field name="service_id"></field>
                        </fields>
                    </key>

                    <key name="ik_0">
                        <desc></desc>
                        <type>index</type>
                        <fields>
                            <field name="service_id"></field>
                            <field name="host_id"></field>
                        </fields>
                    </key>
                </keys>
            </table>

            <!-- }}} -->
            <!-- {{{ table service_basic -->

            <table name="service_basic">
                <desc>服务基本信息表</desc>
                <engine>InnoDB</engine>
                <charset>utf8</charset>
                <columns>
                    <column name="service_id">
                        <desc>关联 service_key.service_id</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default></default>
                    </column>

                    <column name="description">
                        <desc>服务的描述信息</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>1024</precision>
                        <default></default>
                    </column>

                    <column name="alias">
                        <desc>服务别名</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>255</precision>
                        <default></default>
                    </column>

                    <column name="display_name">
                        <desc>服务显示名</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>255</precision>
                        <default></default>
                    </column>

                    <column name="group_id">
                        <desc>服务所属组. 关联 service_group.group_id</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default></default>
                    </column>
                </columns>

                <keys>
                    <key name="">
                        <desc></desc>
                        <type>primary</type>
                        <fields>
                            <field name="service_id"></field>
                        </fields>
                    </key>
                </keys>
            </table>

            <!-- }}} -->
            <!-- {{{ table service_monitor -->

            <table name="service_monitor">
                <desc>服务告警信息表</desc>
                <engine>InnoDB</engine>
                <charset>utf8</charset>
                <columns>
                    <column name="service_id">
                        <desc>关联 service_key.service_id</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default></default>
                    </column>

                    <column name="initial_state">
                        <desc>服务的初始化状态 0:OK 1:WARNING 2:UNKNOWN 3: CRITICAL</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>4</precision>
                        <default>0</default>
                    </column>

                    <column name="max_check_attempt">
                        <desc>服务处于非正常状态时重试的次数</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>4</precision>
                        <default>0</default>
                    </column>

                    <column name="check_interval">
                        <desc>服务检查的时间间隔 单位 秒</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default>60</default>
                    </column>

                    <column name="retry_interval">
                        <desc>服务重试的时间间隔 单位 秒</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default>60</default>
                    </column>

                    <column name="cache_interval">
                        <desc>主机缓存可信任时间 单位 秒</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default>15</default>
                    </column>

                    <column name="check_type">
                        <desc>服务检测的方式 0:主动检测 1:被动检测</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>4</precision>
                        <default>0</default>
                    </column>

                    <column name="check_period_id">
                        <desc>服务检测的时间段 关联time_period.period_id</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default></default>
                    </column>

                    <column name="check_freshness">
                        <desc>服务是否开启刷新检测，只有被动检测有效 0:不开启 1:开启</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>4</precision>
                        <default>0</default>
                    </column>

                    <column name="freshness_threshold">
                        <desc>服务刷新检测的阀值 单位 秒</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default>0</default>
                    </column>

                    <column name="event_handler_enable">
                        <desc>服务是否开启事件处理 0:不开启 1:开启</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>4</precision>
                        <default>0</default>
                    </column>

                    <column name="flap_enable">
                        <desc>服务是否开启抖动感知 0:不开启 1:开启</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>4</precision>
                        <default>0</default>
                    </column>

                    <column name="flap_options">
                        <desc>服务抖动感知级别 1:OK 2:WARNING 4:UNKNOWN 8:CRITICAL</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>4</precision>
                        <default>15</default>
                    </column>

                    <column name="low_flap_threshold">
                        <desc>服务抖动感知低阀值</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default>25</default>
                    </column>

                    <column name="high_flap_threshold">
                        <desc>服务抖动感知高阀值</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default>50</default>
                    </column>

                    <column name="contact_id">
                        <desc>服务通知的联系人 多个用逗号分隔</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>255</precision>
                        <default></default>
                    </column>

                    <column name="contact_group_id">
                        <desc>服务通知的联系人组 多个用逗号分隔</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>255</precision>
                        <default></default>
                    </column>

                    <column name="notice_enable">
                        <desc>服务通知是否开启 0:不开启 1:开启</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>4</precision>
                        <default>0</default>
                    </column>

                    <column name="notice_interval">
                        <desc>服务通知的时间间隔 单位 秒</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default>60</default>
                    </column>

                    <column name="notice_period_id">
                        <desc>服务通知的时间段 关联 time_period.period_id</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default></default>
                    </column>

                    <column name="notice_options">
                        <desc>服务通知的等级 1:WARNING 2:UNKNOWN 4:CRITICAL 8:RECOVER 16:FLAPING 32:DOWNTIME</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>4</precision>
                        <default>63</default>
                    </column>
                </columns>

                <keys>
                    <key name="">
                        <desc></desc>
                        <type>primary</type>
                        <fields>
                            <field name="service_id"></field>
                        </fields>
                    </key>
                </keys>
            </table>

            <!-- }}} -->
            <!-- {{{ table service_status -->

            <table name="service_status">
                <desc>服务状态信息表</desc>
                <engine>InnoDB</engine>
                <charset>utf8</charset>
                <columns>
                    <column name="service_id">
                        <desc>关联 service_key.service_id</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default>0</default>
                    </column>
                    <column name="status_update">
                        <desc>服务状态更新时间</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default>0</default>
                    </column>

                    <column name="output">
                        <desc>服务检测的返回信息摘要</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>1024</precision>
                        <default></default>
                    </column>

                    <column name="long_output">
                        <desc>服务检测的返回信息</desc>
                        <type>text</type>
                        <nullable>false</nullable>
                        <precision></precision>
                        <default></default>
                    </column>

                    <column name="current_state">
                        <desc>服务的当前状态 0:OK 1:WARNING 2:UNKNOWN 3: CRITICAL</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>4</precision>
                        <default>0</default>
                    </column>

                    <column name="current_check_attempt">
                        <desc>服务的当前检测重试次数</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>4</precision>
                        <default>0</default>
                    </column>

                    <column name="last_check">
                        <desc>服务的最后检测的时间</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default>0</default>
                    </column>

                    <column name="last_state_change">
                        <desc>服务的最后状态变化的时间</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default>0</default>
                    </column>

                    <column name="last_hard_state_change">
                        <desc>服务的最后硬状态变化的时间</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default>0</default>
                    </column>

                    <column name="last_time_ok">
                        <desc>服务的最后 OK 的时间</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default>0</default>
                    </column>

                    <column name="last_time_warning">
                        <desc>服务的最后 WARNING 的时间</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default>0</default>
                    </column>

                    <column name="last_time_unknown">
                        <desc>服务的最后 UNKNOWN 的时间</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default>0</default>
                    </column>

                    <column name="last_time_critical">
                        <desc>服务的最后 CRITICAL 的时间</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default>0</default>
                    </column>

                    <column name="state_type">
                        <desc>服务最终状态类型 0:SOFT 1:HARD</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>4</precision>
                        <default>0</default>
                    </column>

                    <column name="last_notification">
                        <desc>服务最后通知时间</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default>0</default>
                    </column>

                    <column name="is_flapping">
                        <desc>服务是否处于抖动状态 0:否 1:是</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>4</precision>
                        <default>0</default>
                    </column>

                    <column name="percent_state_change">
                        <desc>服务抖动的变化率</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>4</precision>
                        <default>0</default>
                    </column>

                    <column name="status">
                        <desc>服务历史状态记录，一共保存 21次</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>255</precision>
                        <default></default>
                    </column>
                </columns>

                <keys>
                    <key name="">
                        <desc></desc>
                        <type>primary</type>
                        <fields>
                            <field name="service_id"></field>
                        </fields>
                    </key>
                </keys>
            </table>

            <!-- }}} -->
            <!-- {{{ table service_group -->

            <table name="service_group">
                <desc>服务属组信息表</desc>
                <engine>InnoDB</engine>
                <charset>utf8</charset>
                <columns>
                    <column name="group_id">
                        <desc>服务组 ID</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default></default>
                    </column>

                    <column name="description">
                        <desc>服务组描述</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>1024</precision>
                        <default></default>
                    </column>

                    <column name="alias">
                        <desc>服务组别名</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>255</precision>
                        <default></default>
                    </column>

                    <column name="display_name">
                        <desc>服务组显示名</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>255</precision>
                        <default></default>
                    </column>
                </columns>

                <keys>
                    <key name="">
                        <desc></desc>
                        <type>primary</type>
                        <fields>
                            <field name="group_id"></field>
                        </fields>
                    </key>
                </keys>
            </table>

            <!-- }}} -->
            <!-- {{{ table check_queue -->

            <table name="check_queue">
                <desc>检测队列信息表</desc>
                <engine>InnoDB</engine>
                <charset>utf8</charset>
                <columns>
                    <column name="check_id">
                        <desc>检测 ID</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default></default>
                    </column>

                    <column name="object_id">
                        <desc>检测对象ID</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default></default>
                    </column>

                    <column name="object_type">
                        <desc>检测对象的类型 0:主机 1:服务</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>4</precision>
                        <default>0</default>
                    </column>

                    <column name="check_type">
                        <desc>检测的类型 0:主动 1:被动</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>4</precision>
                        <default>0</default>
                    </column>

                    <column name="priority">
                        <desc>对于主动检测队列的优先级 0:低优先级 1:高优先级</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>4</precision>
                        <default>0</default>
                    </column>

                    <column name="status">
                        <desc>状态 0:未处理 1:正在处理 2:处理超时 3:处理错误 4:处理完成</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>4</precision>
                        <default>0</default>
                    </column>

                    <column name="result">
                        <desc>返回状态 （待约定）</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>4</precision>
                        <default>0</default>
                    </column>

                    <column name="last_check">
                        <desc>最后检测时间</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default>0</default>
                    </column>
                </columns>

                <keys>
                    <key name="">
                        <desc></desc>
                        <type>primary</type>
                        <fields>
                            <field name="check_id"></field>
                        </fields>
                    </key>
                </keys>
            </table>

            <!-- }}} -->
            <!-- {{{ table downtime_queue -->

            <table name="downtime_queue">
                <desc>计划停机队列</desc>
                <engine>InnoDB</engine>
                <charset>utf8</charset>
                <columns>
                    <column name="downtime_id">
                        <desc>计划停机 ID</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default></default>
                    </column>

                    <column name="downtime_type">
                        <desc>计划停机的类型 0:不可变 1:可变</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>4</precision>
                        <default>0</default>
                    </column>

                    <column name="contact_id">
                        <desc>添加计划停机的管理员 ID 关联contact.contact_id</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default></default>
                    </column>

                    <column name="in_time">
                        <desc>加入时间</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default>0</default>
                    </column>

                    <column name="start_time">
                        <desc>开始时间</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default>0</default>
                    </column>

                    <column name="end_time">
                        <desc>结束时间</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default>0</default>
                    </column>

                    <column name="duration">
                        <desc>持续时间 单位 秒</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default>0</default>
                    </column>

                    <column name="triggered_id">
                        <desc>如果是可变的，该停机计划触发的 ID</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default>0</default>
                    </column>

                    <column name="sch_start_time">
                        <desc>计划停机实际调度开始时间</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default>0</default>
                    </column>

                    <column name="sch_end_time">
                        <desc>计划停机实际调度结束时间</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default>0</default>
                    </column>

                    <column name="status">
                        <desc>计划停机当前的状态 0:未开始 1:开始</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>4</precision>
                        <default>0</default>
                    </column>

                    <column name="comment_data">
                        <desc>计划停机说明</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>255</precision>
                        <default></default>
                    </column>
                </columns>

                <keys>
                    <key name="">
                        <desc></desc>
                        <type>primary</type>
                        <fields>
                            <field name="downtime_id"></field>
                        </fields>
                    </key>
                </keys>
            </table>

            <!-- }}} -->
            <!-- {{{ table notice_basic_queue -->

            <table name="notice_basic_queue">
                <desc>通知基本队列</desc>
                <engine>InnoDB</engine>
                <charset>utf8</charset>
                <columns>
                    <column name="notice_id">
                        <desc>检测 ID</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default></default>
                    </column>

                    <column name="in_time">
                        <desc>入队列时间</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default>0</default>
                    </column>

                    <column name="recheck_time">
                        <desc>重新调度后的过滤发送时间</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default>0</default>
                    </column>

                    <column name="object_id">
                        <desc>检测对象ID</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default></default>
                    </column>

                    <column name="contact_id">
                        <desc>联系人ID</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>255</precision>
                        <default></default>
                    </column>

                    <column name="contact_group_id">
                        <desc>联系人组ID</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>255</precision>
                        <default></default>
                    </column>

                    <column name="object_type">
                        <desc>检测对象的类型 0:主机 1:服务</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>4</precision>
                        <default>0</default>
                    </column>

                    <!--output / long_output / current_state 切忌不能取 status的数据，因为这个通知的时间可能不一定是当前时间，status是随时变化的-->
                    <column name="output">
                        <desc>服务检测的返回信息摘要</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>1024</precision>
                        <default></default>
                    </column>

                    <column name="long_output">
                        <desc>服务检测的返回信息</desc>
                        <type>text</type>
                        <nullable>false</nullable>
                        <precision></precision>
                        <default></default>
                    </column>

                    <column name="current_state">
                        <desc>状态 主机：0:DOWN 1:UNREACHABLE 2:RECOVER 3:FLAPINGSTART 4:FLAPINGEND 5:DOWNTIMESTART 6:DOWNTIMEEND 7:DOWNTIMECANCEL
                        服务：0:WARNING 1:UNKNOWN 2:CRITICAL 3:RECOVER 4:FLAPINGSTART 5:FLAPINGEND 6:DOWNTIMESTART 7:DOWNTIMEEND 8:DOWNTIMECANCEL</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>4</precision>
                        <default>0</default>
                    </column>

                    <column name="status">
                        <desc>状态 0:未处理 1:正在处理 2:处理超时 3:处理错误 4:处理完成</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>4</precision>
                        <default>0</default>
                    </column>

                    <column name="result">
                        <desc>返回状态 （待约定）</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>4</precision>
                        <default>0</default>
                    </column>
                </columns>

                <keys>
                    <key name="">
                        <desc></desc>
                        <type>primary</type>
                        <fields>
                            <field name="notice_id"></field>
                        </fields>
                    </key>
                </keys>
            </table>

            <!-- }}} -->
            <!-- {{{ table notice_send_queue -->

            <table name="notice_send_queue">
                <desc>通知发送队列</desc>
                <engine>InnoDB</engine>
                <charset>utf8</charset>
                <columns>
                    <column name="notice_id">
                        <desc>通知发送 ID</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default>0</default>
                    </column>

                    <column name="contact_id">
                        <desc>联系人ID</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default></default>
                    </column>

                    <column name="send_method">
                        <desc>发送方式</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>4</precision>
                        <default>0</default>
                    </column>

                    <column name="in_time">
                        <desc>入队列时间</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default>0</default>
                    </column>

                    <column name="object_id">
                        <desc>检测对象ID</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default></default>
                    </column>

                    <column name="object_type">
                        <desc>检测对象的类型 0:主机 1:服务</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>4</precision>
                        <default>0</default>
                    </column>

                    <!--output / long_output / current_state 切忌不能取 status的数据，因为这个通知的时间可能不一定是当前时间，status是随时变化的-->
                    <column name="output">
                        <desc>服务检测的返回信息摘要</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>1024</precision>
                        <default></default>
                    </column>

                    <column name="long_output">
                        <desc>服务检测的返回信息</desc>
                        <type>text</type>
                        <nullable>false</nullable>
                        <precision></precision>
                        <default></default>
                    </column>

                    <column name="current_state">
                        <desc>状态 主机：0:DOWN 1:UNREACHABLE 2:RECOVER 3:FLAPINGSTART 4:FLAPINGEND 5:DOWNTIMESTART 6:DOWNTIMEEND 7:DOWNTIMECANCEL
                        服务：0:WARNING 1:UNKNOWN 2:CRITICAL 3:RECOVER 4:FLAPINGSTART 5:FLAPINGEND 6:DOWNTIMESTART 7:DOWNTIMEEND 8:DOWNTIMECANCEL</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>4</precision>
                        <default>0</default>
                    </column>

                    <column name="status">
                        <desc>状态 0:未处理 1:正在处理 2:处理超时 3:处理错误 4:处理完成</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>4</precision>
                        <default>0</default>
                    </column>

                    <column name="result">
                        <desc>返回状态 （待约定）</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>4</precision>
                        <default>0</default>
                    </column>
                </columns>

                <keys>
                    <key name="">
                        <desc></desc>
                        <type>primary</type>
                        <fields>
                            <field name="notice_id"></field>
                        </fields>
                    </key>
                </keys>
            </table>

            <!-- }}} -->
            <!-- {{{ table notice_history -->

            <table name="notice_history">
                <desc>通知历史</desc>
                <engine>InnoDB</engine>
                <charset>utf8</charset>
                <columns>
                    <column name="notice_id">
                        <desc>通知发送 ID</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default>0</default>
                    </column>

                    <column name="object_id">
                        <desc>检测对象ID</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default></default>
                    </column>

                    <column name="send_time">
                        <desc>发送通知时间</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default>0</default>
                    </column>

                    <column name="object_type">
                        <desc>检测对象的类型 0:主机 1:服务</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>4</precision>
                        <default>0</default>
                    </column>

                    <column name="output">
                        <desc>服务检测的返回信息摘要</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>1024</precision>
                        <default></default>
                    </column>

                    <column name="long_output">
                        <desc>服务检测的返回信息</desc>
                        <type>text</type>
                        <nullable>false</nullable>
                        <precision></precision>
                        <default></default>
                    </column>

                    <column name="status">
                        <desc>状态 主机：0:DOWN 1:UNREACHABLE 2:RECOVER 3:FLAPINGSTART 4:FLAPINGEND 5:DOWNTIMESTART 6:DOWNTIMEEND 7:DOWNTIMECANCEL
                        服务：0:WARNING 1:UNKNOWN 2:CRITICAL 3:RECOVER 4:FLAPINGSTART 5:FLAPINGEND 6:DOWNTIMESTART 7:DOWNTIMEEND 8:DOWNTIMECANCEL</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>4</precision>
                        <default>0</default>
                    </column>
                </columns>

                <keys>
                    <key name="">
                        <desc></desc>
                        <type>primary</type>
                        <fields>
                            <field name="notice_id"></field>
                        </fields>
                    </key>
                </keys>
            </table>

            <!-- }}} -->
            <!-- {{{ table notice_contact -->

            <table name="notice_contact">
                <desc>通知历史的联系人表</desc>
                <engine>InnoDB</engine>
                <charset>utf8</charset>
                <columns>
                    <column name="notice_id">
                        <desc>通知发送 ID 关联 notice_history.notice_id</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default>0</default>
                    </column>

                    <column name="contact_id">
                        <desc>联系人ID 关联contact_key.contact_id</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default></default>
                    </column>

                    <column name="notice_method">
                        <desc>通知方式</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>4</precision>
                        <default>0</default>
                    </column>

                    <column name="content">
                        <desc>发送内容</desc>
                        <type>text</type>
                        <nullable>false</nullable>
                        <precision></precision>
                        <default></default>
                    </column>
                </columns>

                <keys>
                    <key name="">
                        <desc></desc>
                        <type>primary</type>
                        <fields>
                            <field name="notice_id"></field>
                            <field name="contact_id"></field>
                        </fields>
                    </key>
                </keys>
            </table>

            <!-- }}} -->
            <!-- {{{ table contact_key -->

            <table name="contact_key">
                <desc>通知联系人关键信息表</desc>
                <engine>InnoDB</engine>
                <charset>utf8</charset>
                <columns>
                    <column name="contact_id">
                        <desc>联系人 ID</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default></default>
                    </column>

                    <column name="contact_name">
                        <desc>联系人名称</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>255</precision>
                        <charset>latin1</charset>
                        <default></default>
                    </column>
                </columns>

                <keys>
                    <key name="">
                        <desc></desc>
                        <type>primary</type>
                        <fields>
                            <field name="contact_id"></field>
                        </fields>
                    </key>
                </keys>
            </table>

            <!-- }}} -->
            <!-- {{{ table contact_basic -->

            <table name="contact_basic">
                <desc>主机基本信息表</desc>
                <engine>InnoDB</engine>
                <charset>utf8</charset>
                <columns>
                    <column name="contact_id">
                        <desc>关联 contact_key.contact_id</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default></default>
                    </column>

                    <column name="description">
                        <desc>联系人描述信息</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>1024</precision>
                        <default></default>
                    </column>

                    <column name="alias">
                        <desc>联系人别名</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>255</precision>
                        <default></default>
                    </column>

                    <column name="display_name">
                        <desc>联系人显示名</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>255</precision>
                        <default></default>
                    </column>

                    <column name="email">
                        <desc>EMAIL 地址</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>255</precision>
                        <default></default>
                    </column>

                    <column name="group_id">
                        <desc>联系人所属组. 关联 contact_group.group_id</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default></default>
                    </column>
                </columns>

                <keys>
                    <key name="">
                        <desc></desc>
                        <type>primary</type>
                        <fields>
                            <field name="contact_id"></field>
                        </fields>
                    </key>
                </keys>
            </table>

            <!-- }}} -->
            <!-- {{{ table contact_monitor -->

            <table name="contact_monitor">
                <desc>联系人告警信息表</desc>
                <engine>InnoDB</engine>
                <charset>utf8</charset>
                <columns>
                    <column name="contact_id">
                        <desc>关联 contact_key.contact_id</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default></default>
                    </column>

                    <column name="host_period_id">
                        <desc>主机发送通知的时间段 关联 time_period.period_id</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default></default>
                    </column>

                    <column name="service_period_id">
                        <desc>服务发送通知的时间段 关联 time_period.period_id</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default></default>
                    </column>

                    <column name="host_notice_enable">
                        <desc>是否接收主机通知 0:不开启 1:开启</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>4</precision>
                        <default>1</default>
                    </column>

                    <column name="service_notice_enable">
                        <desc>是否接收服务通知 0:不开启 1:开启</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>4</precision>
                        <default>1</default>
                    </column>

                    <column name="notice_options">
                        <desc>通知等级 1:SERVICE_RECOVER 2:SERVICE_WARNING 4:SERVICE_UNKNOWN 8:SERVICE_CRITICAL 16:SERVICE_FLAPPING 32:SERVICE_DOWNTIME 64:HOST_RECOVERY 128:HOST_DOWN 256:HOST_UNREACHABLE 512:HOST_FLAPPING 1024:HOST_DOWNTIME</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default>2047</default>
                    </column>
                </columns>

                <keys>
                    <key name="">
                        <desc></desc>
                        <type>primary</type>
                        <fields>
                            <field name="contact_id"></field>
                        </fields>
                    </key>
                </keys>
            </table>

            <!-- }}} -->
            <!-- {{{ table contact_group -->

            <table name="contact_group">
                <desc>联系人属组信息表</desc>
                <engine>InnoDB</engine>
                <charset>utf8</charset>
                <columns>
                    <column name="group_id">
                        <desc>联系人组 ID</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default></default>
                    </column>

                    <column name="description">
                        <desc>联系人组描述</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>1024</precision>
                        <default></default>
                    </column>

                    <column name="alias">
                        <desc>联系人组别名</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>255</precision>
                        <default></default>
                    </column>

                    <column name="display_name">
                        <desc>联系人组显示名</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>255</precision>
                        <default></default>
                    </column>
                </columns>

                <keys>
                    <key name="">
                        <desc></desc>
                        <type>primary</type>
                        <fields>
                            <field name="group_id"></field>
                        </fields>
                    </key>
                </keys>
            </table>

            <!-- }}} -->
            <!-- {{{ table notice_method -->

            <table name="notice_method">
                <desc>通知联系人方式</desc>
                <engine>InnoDB</engine>
                <charset>utf8</charset>
                <columns>
                    <column name="method_id">
                        <desc>通知发送的方式 ID </desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default></default>
                    </column>

                    <column name="contact_id">
                        <desc>联系人ID 关联contact_key.contact_id</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default></default>
                    </column>

                    <column name="notice_method">
                        <desc>通知方式</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>4</precision>
                        <default>0</default>
                    </column>

                    <column name="address">
                        <desc>通知联系地址</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>255</precision>
                        <default></default>
                    </column>
                </columns>

                <keys>
                    <key name="">
                        <desc></desc>
                        <type>primary</type>
                        <fields>
                            <field name="method_id"></field>
                            <field name="contact_id"></field>
                        </fields>
                    </key>
                </keys>
            </table>

            <!-- }}} -->
            <!-- {{{ table time_period -->

            <table name="time_period">
                <desc>时间段</desc>
                <engine>InnoDB</engine>
                <charset>utf8</charset>
                <columns>
                    <column name="period_id">
                        <desc>时间段 ID </desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default>0</default>
                    </column>
                </columns>

                <keys>
                    <key name="">
                        <desc></desc>
                        <type>primary</type>
                        <fields>
                            <field name="period_id"></field>
                        </fields>
                    </key>
                </keys>
            </table>

            <!-- }}} -->
            <!-- {{{ table acknowledgement -->

            <table name="acknowledgement">
                <desc>故障确认信息表</desc>
                <engine>InnoDB</engine>
                <charset>utf8</charset>
                <columns>
                    <column name="ack_id">
                        <desc>故障确认 ID </desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default></default>
                    </column>

                    <column name="in_time">
                        <desc>故障确认时间</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default></default>
                    </column>

                    <column name="end_time">
                        <desc>故障确认结束时间</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default></default>
                    </column>

                    <column name="object_id">
                        <desc>故障对象ID</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default></default>
                    </column>

                    <column name="object_type">
                        <desc>故障对象的类型 0:主机 1:服务</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>4</precision>
                        <default>0</default>
                    </column>

                    <column name="state">
                        <desc>故障对象确认状态 主机: 0 = UP; 1 = DOWN; 2 = UNREACHABLE; 服务: 0 = OK; 1 = WARNING; 2 = CRTICAL; 3 = UNKNOWN</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>4</precision>
                        <default>0</default>
                    </column>

                    <column name="is_sticky">
                        <desc>故障确认失效方式 0:当故障对象的状态改变立即结束 1:当故障对象 RECOVER 后结束</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>4</precision>
                        <default>0</default>
                    </column>

                    <column name="object_type">
                        <desc>故障对象的类型 0:主机 1:服务</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>4</precision>
                        <default>0</default>
                    </column>

                    <column name="contact_id">
                        <desc>确认故障的管理员 关联 contact_key.contact_id</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <default></default>
                    </column>

                    <column name="comment_data">
                        <desc>故障确认说明</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>255</precision>
                        <default></default>
                    </column>
                </columns>

                <keys>
                    <key name="">
                        <desc></desc>
                        <type>primary</type>
                        <fields>
                            <field name="ack_id"></field>
                        </fields>
                    </key>
                </keys>
            </table>

            <!-- }}} -->

        </tables>
        <!-- }}} end tables -->
    </database>
    <!-- }}} end database eyou_mail -->
</databases>
<!-- }}} end databases -->
